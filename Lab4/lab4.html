<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<title>Lab 4</title>
</head>
<body bgcolor="#ffffff" text="#000000">



<h1>LAB 4 "Система ПВО и летающие тарелки"</h1>

<hl1>(настоящая задача реального времени)</hl1>
 


<p>Система ПВО состоит из четырех локаторов и главной ракетной установки (ГРУ).
Локаторы определяют высоту и размеры объекта, когда он пролетает над ними.
ГРУ может стрелять ракетами и запускать радио-управляемые снаряды (РУС).
Количество ракет практически не ограничено, а РУСов всего 11.
Вот как это выглядит: <tt>plates-0.demo</tt>.
Чтобы выстрелить ракетой, нажмите пробел.
Чтобы запустить РУС, нажмите его номер (0..9), Enter, затем пользуйтесь
клавишами стрелок, пока он не улетит за пределы видимости.
Потренируйтесь запускать несколько РУСов (хотя бы два) и управлять ими,
нажимая соответствующий номер и клавиши стрелок.
</p>



<p>Это был нулевой уровень. 
А теперь запустите программу первого уровня <tt>plates-1.demo</tt>.
Здесь уже появляется летающая тарелка. Можете попытаться ее сбить.
Это немного легче сделать с помощью РУСа. Но вообще, справиться с этой задачей может только
счетная машина.
</p>


<p>Дадим техническое описание системы.
Система управляется и сообщает данные через регистры (доступные
по определенным адресам). Мы будем использовать для работы с регистрами
функции <tt>int&nbsp;getreg&nbsp;(int&nbsp;reg)</tt> и 
<tt>putreg&nbsp;(int&nbsp;reg,&nbsp;int&nbsp;value)</tt>, название 
и параметры которых говорят сами за себя.
</p>

<p>ГРУ стреляет ракетой в результате записи команды <tt>GUNS_SHOOT</tt> 
в регистр <tt>RG_GUNS</tt>.
</p>

<p>Управление РУСом производится следующим образом.
В регистр <tt>RG_RCMN</tt> записывается номер снаряда (0, 1, ...).
После этого команды, записываемые в регистр <tt>RG_RCMC</tt>,
передаются (по радиоканалу) снаряду с этим номером. Вам рекомендуется
использовать следующие команды:
</p>

<ul>
<li><tt>RCMC_START</tt> запуск снаряда и движение вверх
<li><tt>RCMC_LEFT</tt> переключение направления движения влево
<li><tt>RCMC_RIGHT</tt> переключение направления движения вправо
<li><tt>RCMC_UP</tt> переключение направления движения вверх
<li><tt>RCMC_DOWN</tt> переключение направления движения вниз
</ul>

<p>Можете посмотреть, как выглядит 
<a href="plates-m.html">текст программы</a> первого уровня,
которую вам предлагалось запустить.
Программа просто записывает определенную команду в определенный регистр
при нажатии на определенную клавишу.
</p>

<p>Дадим некоторые коментарии к этой программе.
</p>

<dl>
<dt><tt>#include "/home/adm/labs/plates.h"</tt></dt>
<dd>включаем определения регистров, команд и др.</dd>
<dt><tt>StartGame (int level);</tt></dt>
<dd>запуск системы на уровне <tt>level</tt>. Различаются следующие уровни:
  <ul>
  <li> 0 - нет тарелок
  <li> 1 - одна тарелка, движущаяся слева направо
  <li> 2 - две тарелки
  <li> 3 - много тарелок
  </ul>
</dd>
<dt><tt>EndGame ();</tt></dt>
<dd>завершение работы системы.</dd>
</dl>

<p>Трансляция программы осуществляется следующим образом:
</p>

<p><tt>cc myprog.cpp /home/adm/labs/plates.o -l vg</tt>
</p>

<p><b>Ваша задача</b> состоит в том, чтобы <b>программно</b> управлять ГРУ
(вы видели, что вручную справиться с задачей уничтожения тарелок
практически невозможно).
Т.е. нужно просто записывать команду в регистр в нужный момент времени.
И больше ничего. Все очень просто. <b>Рисовать на экране ничего не нужно</b>.


<p>Тарелки движутся строго горизонтально с постоянной скоростью, причем
всегда на разных высотах (т.е. высота однозначно идентифицирует тарелку).
Для определения момента появления тарелки, ее высоты и скорости
используются четыре локатора.
Когда тарелка (точнее, ее центральная точка) пролетает над локатором,
локатор формирует прерывание <tt>LOC_INTR</tt>. При этом регистры локатора
содержат следующую информацию:
</p>

<ul>
<li> <tt>RG_LOCN</tt> - номер локатора (1..4);
<li> <tt>RG_LOCY</tt> - высота цели (координата Y);
<li> <tt>RG_LOCW</tt> - размер цели.
</ul>

<p>Значение регистров сохраняется до выхода из обработчика прерывания
(вне обработчика содержимое регистров меняется непредсказуемо и его
целостность не гарантируется).
Размер цели определяет ее область поражения.
Для тарелки <tt>W=3</tt>.
Кроме тарелок еще могут появляться перелетные птицы (воробьи)
<tt>W=1</tt>.
Стрелять по воробьям не рекомендуется.
</p>

<p>Вы можете посмотреть, как идут прерывания от локаторов, запустив программу
<tt>p4-3.demo</tt>.
</p>

<p>Наконец, последние тактико-технические характеристики системы (эти данные секретны,
их необходимо запомнить наизусть):
</p>

<dl>
<dt><tt>размер рабочего пространства</tt></dt>
<dd>800 на 600 точек</dd>
<dt><tt>×-координаты локаторов</tt></dt>
<dd>10, 20, 780, 790</dd>
<dt><tt>скорость полета ракеты</tt></dt>
<dd>100 точек в секунду</dd>
<dt><tt>начальная высота ракеты</tt></dt>
<dd>570 (y-координата)</dd>
<dt><tt>скорость полета управляемого снаряда</tt></dt>
<dd>250 точек в секунду (в любом направлении)</dd>
<dt><tt>начальная высота управляемого снаряда</tt></dt>
<dd>570 (y-координата)</dd>
<dt><tt>×-координата точки старта ракеты или управляемого снаряда</tt></dt>
<dd>400</dd>
</dl>

<p>Теперь вы можете приступать к составлению программы.
Реализация может выполняться на нескольких ступенях.
</p>

<hr>

<h1>ЗАДАНИЯ (по ступеням)</h1>

<dl>
<dt><b>Ступень 0</b></dt>
<dd>Написать программу, осуществляющую полет управляемого снаряда
по квадрату 200х200, а затем по прямоугольнику 500х200 точек.
Тарелок нет.</dd>
<dt><b>Ступень 1</b></dt>
<dd>Написать программу, сбивающую одну тарелку с помощью ракеты
(тарелка движется слева направо).</dd>
<dt><b>Ступень 2</b></dt>
<dd>Написать программу, сбивающую несколько тарелок с помощью ракет
(тарелки движутся в разных направлениях).</dd>
<dt><b>Ступень 3</b></dt>
<dd>Написать программу, сбивающую медленные тарелки ракетами,
а быстрые -- управляемыми снарядами.</dd>
</dl>


<hr>

<p>Желающие могут развлечься путем запуска
программ с ручным управлением для всех уровней работы системы:
</p>

<ul>
<li><tt>plates-0.demo</tt> уровень 0 - <tt>StartGame (0)</tt>
<li><tt>plates-1.demo</tt> уровень 1 - <tt>StartGame (1)</tt>
<li><tt>plates-2.demo</tt> уровень 2 - <tt>StartGame (2)</tt>
<li><tt>plates-3.demo</tt> уровень 3 - <tt>StartGame (3)</tt>
</ul>

<p><b>КОНЕЦ</b>
</p>
</body>
</html>
